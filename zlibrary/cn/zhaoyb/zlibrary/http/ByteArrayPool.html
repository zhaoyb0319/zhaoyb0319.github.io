

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc (build 1.6.0_65) on Mon Jun 29 09:41:39 CST 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>
ByteArrayPool
</title>

<meta name="date" content="2015-06-29">

<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">

<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ByteArrayPool";
    }
}
</script>
<noscript>
</noscript>

</head>

<body bgcolor="white" onload="windowTitle();">
<hr>


<!-- ========= START OF TOP NAVBAR ======= -->
<a name="navbar_top"><!-- --></a>
<a href="#skip-navbar_top" title="跳过导航链接"></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0" summary="">
<tr>
<td colspan="2" bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3" summary="">
  <tr align="center" valign="top">
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../overview-summary.html"><font class="NavBarFont1"><b>概述</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="package-summary.html"><font class="NavBarFont1"><b>软件包</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev"> &nbsp;<font class="NavBarFont1Rev"><b>类</b></font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="package-tree.html"><font class="NavBarFont1"><b>树</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../deprecated-list.html"><font class="NavBarFont1"><b>已过时</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../index-files/index-1.html"><font class="NavBarFont1"><b>索引</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../help-doc.html"><font class="NavBarFont1"><b>帮助</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td align="right" valign="top" rowspan="3"><em>
</em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;上一个类&nbsp;
&nbsp;<a href="../../../../cn/zhaoyb/zlibrary/http/CacheDispatcher.html" title="cn.zhaoyb.zlibrary.http 中的类"><b>下一个类</b></a></font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="../../../../index.html?cn/zhaoyb/zlibrary/http/ByteArrayPool.html" target="_top"><b>框架</b></a>  &nbsp;
&nbsp;<a href="ByteArrayPool.html" target="_top"><b>无框架</b></a>  &nbsp;
&nbsp;<script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</script>
<noscript>
  <a href="../../../../allclasses-noframe.html"><b>所有类</b></a>
</noscript>


</font></td>
</tr>
<tr>
<td valign="top" class="NavBarCell3"><font size="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;<a href="#field_summary">字段</a>&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<a href="#method_summary">方法</a></font></td>
<td valign="top" class="NavBarCell3"><font size="-2">
详细信息：&nbsp;<a href="#field_detail">字段</a>&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<a href="#method_detail">方法</a></font></td>
</tr>
</table>
<a name="skip-navbar_top"></a>
<!-- ========= END OF TOP NAVBAR ========= -->

<hr>
<!-- ======== START OF CLASS DATA ======== -->
<h2>
<font size="-1">
cn.zhaoyb.zlibrary.http</font>
<br>
类 ByteArrayPool</h2>
<pre>
java.lang.Object
  <img src="../../../../resources/inherit.gif" alt="继承者 "><b>cn.zhaoyb.zlibrary.http.ByteArrayPool</b>
</pre>
<hr>
<dl>
<dt><pre>public class <b>ByteArrayPool</b><dt>extends java.lang.Object</dt></pre></dt></dl>


<p>
ByteArrayPool is a source and repository of <code>byte[]</code> objects. Its
 purpose is to supply those buffers to consumers who need to use them for a
 short period of time and then dispose of them. Simply creating and disposing
 such buffers in the conventional manner can considerable heap churn and
 garbage collection delays on Android, which lacks good management of
 short-lived heap objects. It may be advantageous to trade off some memory in
 the form of a permanently allocated pool of buffers in order to gain heap
 performance improvements; that is what this class does.
 </p><p>
 A good candidate user for this class is something like an I/O system that
 uses large temporary <code>byte[]</code> buffers to copy data around. In
 these use cases, often the consumer wants the buffer to be a certain minimum
 size to ensure good performance (e.g. when copying data chunks off of a
 stream), but doesn't mind if the buffer is larger than the minimum. Taking
 this into account and also to maximize the odds of being able to reuse a
 recycled buffer, this class is free to return buffers larger than the
 requested size. The caller needs to be able to gracefully deal with getting
 buffers any size over the minimum.
 </p><p>
 If there is not a suitably-sized buffer in its recycling pool when a buffer
 is requested, this class will allocate a new buffer and return it.
 </p><p>
 This class has no special ownership of buffers it creates; the caller is free
 to take a buffer it receives from this pool, use it permanently, and never
 return it to the pool; additionally, it is not harmful to return to this pool
 a buffer that was allocated elsewhere, provided there are no other lingering
 references to it.
 </p><p>
 This class ensures that the total size of the buffers in its recycling pool
 never exceeds a certain byte limit. When a buffer is returned that would
 cause the pool to exceed the limit, least-recently-used buffers are disposed.
</p><p>

</p><p>
<hr>

</p><p>
<!-- =========== FIELD SUMMARY =========== -->

<a name="field_summary"><!-- --></a>
<table border="1" width="100%" cellpadding="3" cellspacing="0" summary="">
<tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="2"><font size="+2">
<b>字段摘要</b></font></th>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><font size="-1">
<code>protected static&nbsp;java.util.Comparator&lt;byte[]&gt;</code></font></td>
<td><code><b><a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html#BUF_COMPARATOR">BUF_COMPARATOR</a></b></code>

<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compares buffers by size</td>
</tr>
</table>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<a name="method_summary"><!-- --></a>
<table border="1" width="100%" cellpadding="3" cellspacing="0" summary="">
<tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="2"><font size="+2">
<b>方法摘要</b></font></th>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><font size="-1">
<code>static&nbsp;<a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html" title="cn.zhaoyb.zlibrary.http 中的类">ByteArrayPool</a></code></font></td>
<td><code><b><a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html#get()">get</a></b>()</code>

<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the singleton instance.</td>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><font size="-1">
<code>&nbsp;byte[]</code></font></td>
<td><code><b><a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html#getBuf(int)">getBuf</a></b>(int&nbsp;len)</code>

<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a buffer from the pool if one is available in the requested size,
 or allocates a new one if a pooled one is not available.</td>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><font size="-1">
<code>static&nbsp;void</code></font></td>
<td><code><b><a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html#init(int)">init</a></b>(int&nbsp;poolSize)</code>

<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Init and persisting the singleton instance.</td>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><font size="-1">
<code>&nbsp;void</code></font></td>
<td><code><b><a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html#returnBuf(byte[])">returnBuf</a></b>(byte[]&nbsp;buf)</code>

<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a buffer to the pool, throwing away old buffers if the pool would
 exceed its allotted size.</td>
</tr>
</table>
&nbsp;<a name="methods_inherited_from_class_java.lang.Object"><!-- --></a>
<table border="1" width="100%" cellpadding="3" cellspacing="0" summary="">
<tr bgcolor="#EEEEFF" class="TableSubHeadingColor">
<th align="left"><b>从类 java.lang.Object 继承的方法</b></th>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></td>
</tr>
</table>
&nbsp;
</p><p>

<!-- ============ FIELD DETAIL =========== -->

<a name="field_detail"><!-- --></a>
<table border="1" width="100%" cellpadding="3" cellspacing="0" summary="">
<tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="1"><font size="+2">
<b>字段详细信息</b></font></th>
</tr>
</table>

<a name="BUF_COMPARATOR"><!-- --></a></p><h3>
BUF_COMPARATOR</h3>
<pre>
protected static final java.util.Comparator&lt;byte[]&gt; <b>BUF_COMPARATOR</b></pre>
<dl>
<dd>Compares buffers by size
<p>
<dl>
</dl>
</p></dd></dl>

<!-- ============ METHOD DETAIL ========== -->

<a name="method_detail"><!-- --></a>
<table border="1" width="100%" cellpadding="3" cellspacing="0" summary="">
<tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="1"><font size="+2">
<b>方法详细信息</b></font></th>
</tr>
</table>

<a name="get()"><!-- --></a><h3>
get</h3>
<pre>
public static <a href="../../../../cn/zhaoyb/zlibrary/http/ByteArrayPool.html" title="cn.zhaoyb.zlibrary.http 中的类">ByteArrayPool</a> <b>get</b>()</pre>
<dl>
<dd>Get the singleton instance.
<p>
<dd><dl>
</dl>
</dd>
</p></dd></dl>
<hr>

<a name="init(int)"><!-- --></a><h3>
init</h3>
<pre>
public static void <b>init</b>(int&nbsp;poolSize)</pre>
<dl>
<dd>Init and persisting the singleton instance.
<p>
<dd><dl>
</dl>
</dd>
</p></dd></dl>
<hr>

<a name="getBuf(int)"><!-- --></a><h3>
getBuf</h3>
<pre>
public byte[] <b>getBuf</b>(int&nbsp;len)</pre>
<dl>
<dd>Returns a buffer from the pool if one is available in the requested size,
 or allocates a new one if a pooled one is not available.
<p>
<dd><dl>
<dt><b>参数：</b><dd><code>len</code> - the minimum size, in bytes, of the requested buffer. The
            returned buffer may be larger.
<dt><b>返回：</b><dd>a byte[] buffer is always returned.</dd></dt></dd></dt></dl>
</dd>
</p></dd></dl>
<hr>

<a name="returnBuf(byte[])"><!-- --></a><h3>
returnBuf</h3>
<pre>
public void <b>returnBuf</b>(byte[]&nbsp;buf)</pre>
<dl>
<dd>Returns a buffer to the pool, throwing away old buffers if the pool would
 exceed its allotted size.
<p>
<dd><dl>
<dt><b>参数：</b><dd><code>buf</code> - the buffer to return to the pool.</dd></dt></dl>
</dd>
</p></dd></dl>
<!-- ========= END OF CLASS DATA ========= -->
<hr>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<a name="navbar_bottom"><!-- --></a>
<a href="#skip-navbar_bottom" title="跳过导航链接"></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0" summary="">
<tr>
<td colspan="2" bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_bottom_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3" summary="">
  <tr align="center" valign="top">
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../overview-summary.html"><font class="NavBarFont1"><b>概述</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="package-summary.html"><font class="NavBarFont1"><b>软件包</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev"> &nbsp;<font class="NavBarFont1Rev"><b>类</b></font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="package-tree.html"><font class="NavBarFont1"><b>树</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../deprecated-list.html"><font class="NavBarFont1"><b>已过时</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../index-files/index-1.html"><font class="NavBarFont1"><b>索引</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="../../../../help-doc.html"><font class="NavBarFont1"><b>帮助</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td align="right" valign="top" rowspan="3"><em>
</em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;上一个类&nbsp;
&nbsp;<a href="../../../../cn/zhaoyb/zlibrary/http/CacheDispatcher.html" title="cn.zhaoyb.zlibrary.http 中的类"><b>下一个类</b></a></font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="../../../../index.html?cn/zhaoyb/zlibrary/http/ByteArrayPool.html" target="_top"><b>框架</b></a>  &nbsp;
&nbsp;<a href="ByteArrayPool.html" target="_top"><b>无框架</b></a>  &nbsp;
&nbsp;<script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</script>
<noscript>
  <a href="../../../../allclasses-noframe.html"><b>所有类</b></a>
</noscript>


</font></td>
</tr>
<tr>
<td valign="top" class="NavBarCell3"><font size="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;<a href="#field_summary">字段</a>&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<a href="#method_summary">方法</a></font></td>
<td valign="top" class="NavBarCell3"><font size="-2">
详细信息：&nbsp;<a href="#field_detail">字段</a>&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<a href="#method_detail">方法</a></font></td>
</tr>
</table>
<a name="skip-navbar_bottom"></a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<hr>

</body>
</html>


